<div x-data="setting_security">
    <div class="page-header">
        <button class="back-btn" @click="$dispatch('app:goback')">
            <i class="fas fa-chevron-left"></i>
        </button>
        <h1>Bảo mật</h1>
    </div>

    <main class="main" style="padding: 16px; text-align: center;">

        <div x-show="step === 1">
            <p>Quét mã QR này bằng ứng dụng xác thực của bạn (Google Authenticator, Authy, v.v.).</p>
            <div class="qr-code-container">
                <img :src="qrCodeUrl" alt="Mã QR 2FA" width="200" height="200">
            </div>
            <p>Hoặc nhập mã này thủ công:</p>
            <div class="recovery-word" style="background-color: #1c1c1e; padding: 16px; letter-spacing: 2px;">
                <span x-text="secretKey"></span>
            </div>
            <button class="primary-button" style="width: 100%; margin-top: 20px;" x-on:click="step = 2">Tiếp tục</button>
        </div>

        <div x-show="step === 2">
            <p>Nhập mã 6 số từ ứng dụng xác thực của bạn để hoàn tất thiết lập.</p>
            <div class="form-group">
                <label for="2faCode">Mã 2FA</label>
                <input type="number" id="2faCode" class="input-field" x-model="userCode" placeholder="123456" style="text-align: center; font-size: 20px; letter-spacing: 5px;">
            </div>
            <button class="primary-button" style="width: 100%; margin-top: 20px;" x-on:click="validate2FACode(userCode)">Xác nhận</button>
        </div>
    </main>
</div>

